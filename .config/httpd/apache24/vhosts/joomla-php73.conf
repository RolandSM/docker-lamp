<VirtualHost *:8073>
    ServerName joomla.local
    ServerAlias joomla.test
    ServerAlias www.joomla.local
    ServerAlias www.joomla.test
    DocumentRoot /srv/www/joomla

    <FilesMatch \.php$>
        <If "-f %{REQUEST_FILENAME}">
            SetHandler "proxy:unix:/run/php/php73-fpm.sock|fcgi://localhost/"
        </if>
    </FilesMatch>
</VirtualHost>

<VirtualHost *:8073>
    ServerAlias *.joomla.local
    ServerAlias *.joomla.test
    VirtualDocumentRoot /srv/www/joomla/%1
    UseCanonicalName Off

    <FilesMatch \.php$>
        <If "-f %{REQUEST_FILENAME}">
            SetHandler "proxy:unix:/run/php/php73-fpm.sock|fcgi://localhost/"
        </if>
    </FilesMatch>
</VirtualHost>

<VirtualHost *:8473>
    ServerName joomla.local
    ServerAlias joomla.test
    ServerAlias www.joomla.local
    ServerAlias www.joomla.test
    DocumentRoot /srv/www/joomla

    <FilesMatch \.php$>
        <If "-f %{REQUEST_FILENAME}">
            SetHandler "proxy:unix:/run/php/php73-fpm.sock|fcgi://localhost/"
        </if>
    </FilesMatch>

    SSLEngine On
</VirtualHost>

<VirtualHost *:8473>
    ServerAlias *.joomla.local
    ServerAlias *.joomla.test
    VirtualDocumentRoot /srv/www/joomla/%1
    UseCanonicalName Off

    <FilesMatch \.php$>
        <If "-f %{REQUEST_FILENAME}">
            SetHandler "proxy:unix:/run/php/php73-fpm.sock|fcgi://localhost/"
        </if>
    </FilesMatch>

    SSLEngine On
</VirtualHost>
